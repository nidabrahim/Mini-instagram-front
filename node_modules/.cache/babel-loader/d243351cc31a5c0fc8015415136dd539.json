{"ast":null,"code":"import _classCallCheck from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/userProvider.jsx\";\nimport React, { Component } from 'react';\nimport API from './../api';\nexport var UserContext = React.createContext();\nexport var UserConsumer = UserContext.Consumer;\n\nvar UserProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserProvider, _Component);\n\n  function UserProvider(props) {\n    var _this;\n\n    _classCallCheck(this, UserProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserProvider).call(this, props));\n\n    _this.updateUser = function (user) {\n      _this.setState({\n        user: user\n      });\n    };\n\n    _this.state = {\n      user: {},\n      posts: [],\n      updateUser: _this.updateUser\n    };\n    return _this;\n  }\n\n  _createClass(UserProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var access_token = localStorage.getItem(\"token\");\n      var config = {\n        headers: {\n          Authorization: access_token,\n          'Content-Type': 'application/json'\n        }\n      };\n      API.get(\"me\", config).then(function (res) {\n        var user = res.data.user;\n        var posts = user.posts;\n\n        _this2.setState({\n          user: user,\n          posts: posts\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(UserContext.Provider, {\n        value: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return UserProvider;\n}(Component);\n\nexport default UserProvider;","map":{"version":3,"sources":["/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/userProvider.jsx"],"names":["React","Component","API","UserContext","createContext","UserConsumer","Consumer","UserProvider","props","updateUser","user","setState","state","posts","access_token","localStorage","getItem","config","headers","Authorization","get","then","res","data","catch","error","console","log","children"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,UAAhB;AAEA,OAAO,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,EAApB;AAEP,OAAO,IAAMC,YAAY,GAAGF,WAAW,CAACG,QAAjC;;IAEDC,Y;;;;;AAEJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,sFAAMA,KAAN;;AADiB,UAWnBC,UAXmB,GAWN,UAAAC,IAAI,EAAI;AACnB,YAAKC,QAAL,CAAc;AAAED,QAAAA,IAAI,EAAEA;AAAR,OAAd;AACD,KAbkB;;AAGjB,UAAKE,KAAL,GAAa;AACTF,MAAAA,IAAI,EAAE,EADG;AAETG,MAAAA,KAAK,EAAE,EAFE;AAGTJ,MAAAA,UAAU,EAAE,MAAKA;AAHR,KAAb;AAHiB;AAQlB;;;;wCAOkB;AAAA;;AACjB,UAAMK,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;AAEA,UAAMC,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEL,YADR;AAEP,0BAAgB;AAFT;AADI,OAAf;AAOAZ,MAAAA,GAAG,CAACkB,GAAJ,CAAQ,IAAR,EAAcH,MAAd,EACCI,IADD,CACM,UAAAC,GAAG,EAAI;AACX,YAAMZ,IAAI,GAAGY,GAAG,CAACC,IAAJ,CAASb,IAAtB;AACA,YAAMG,KAAK,GAAGH,IAAI,CAACG,KAAnB;;AACA,QAAA,MAAI,CAACF,QAAL,CAAc;AAAED,UAAAA,IAAI,EAAJA,IAAF;AAAQG,UAAAA,KAAK,EAALA;AAAR,SAAd;AACD,OALD,EAMCW,KAND,CAMO,UAAUC,KAAV,EAAiB;AACtBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OARD;AAUD;;;6BAES;AACR,aACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,QAAA,KAAK,EAAE,KAAKb,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKJ,KAAL,CAAWoB,QADd,CADF;AAKD;;;;EA7CwB3B,S;;AA+C3B,eAAeM,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport API from './../api';\n\nexport const UserContext = React.createContext()\n\nexport const UserConsumer = UserContext.Consumer\n\nclass UserProvider extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n        user: {},\n        posts: [],\n        updateUser: this.updateUser\n    }\n  }\n\n\n  updateUser = user => {\n    this.setState({ user: user });\n  };\n\n  componentDidMount(){\n    const access_token = localStorage.getItem(\"token\");\n\n    const config = {\n      headers: {\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    API.get(\"me\", config)\n    .then(res => {\n      const user = res.data.user;\n      const posts = user.posts;\n      this.setState({ user, posts });\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n    \n  }\n\n  render () {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    )\n  }\n}\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}