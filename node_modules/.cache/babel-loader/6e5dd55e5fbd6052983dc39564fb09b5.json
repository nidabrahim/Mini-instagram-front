{"ast":null,"code":"import _classCallCheck from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/userProvider.jsx\";\nimport React, { Component } from 'react';\nimport API from './../api';\nexport var UserContext = React.createContext();\nexport var UserConsumer = UserContext.Consumer;\n\nvar UserProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserProvider, _Component);\n\n  function UserProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: {},\n      posts: [],\n      updateUser: _this.updateUser\n    };\n\n    _this.updateUser = function (user) {\n      _this.setState({\n        user: user\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UserProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var access_token = localStorage.getItem(\"token\");\n      var config = {\n        headers: {\n          Authorization: access_token,\n          'Content-Type': 'application/json'\n        }\n      };\n      API.get(\"me\", config).then(function (res) {\n        var user = res.data.user;\n        var posts = user.posts;\n\n        _this2.setState({\n          user: user,\n          posts: posts\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(UserContext.Provider, {\n        value: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return UserProvider;\n}(Component);\n\nexport default UserProvider;","map":{"version":3,"sources":["/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/userProvider.jsx"],"names":["React","Component","API","UserContext","createContext","UserConsumer","Consumer","UserProvider","state","user","posts","updateUser","setState","access_token","localStorage","getItem","config","headers","Authorization","get","then","res","data","catch","error","console","log","props","children"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,UAAhB;AAEA,OAAO,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,EAApB;AAEP,OAAO,IAAMC,YAAY,GAAGF,WAAW,CAACG,QAAjC;;IAEDC,Y;;;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,KAAK,EAAE,EAFD;AAGNC,MAAAA,UAAU,EAAE,MAAKA;AAHX,K;;UAMRA,U,GAAa,UAAAF,IAAI,EAAI;AACnB,YAAKG,QAAL,CAAc;AAAEH,QAAAA,IAAI,EAAEA;AAAR,OAAd;AACD,K;;;;;;;wCAEkB;AAAA;;AACjB,UAAMI,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;AAEA,UAAMC,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEL,YADR;AAEP,0BAAgB;AAFT;AADI,OAAf;AAOAX,MAAAA,GAAG,CAACiB,GAAJ,CAAQ,IAAR,EAAcH,MAAd,EACCI,IADD,CACM,UAAAC,GAAG,EAAI;AACX,YAAMZ,IAAI,GAAGY,GAAG,CAACC,IAAJ,CAASb,IAAtB;AACA,YAAMC,KAAK,GAAGD,IAAI,CAACC,KAAnB;;AACA,QAAA,MAAI,CAACE,QAAL,CAAc;AAAEH,UAAAA,IAAI,EAAJA,IAAF;AAAQC,UAAAA,KAAK,EAALA;AAAR,SAAd;AACD,OALD,EAMCa,KAND,CAMO,UAAUC,KAAV,EAAiB;AACtBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OARD;AAUD;;;6BAES;AACR,aACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,QAAA,KAAK,EAAE,KAAKhB,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKmB,KAAL,CAAWC,QADd,CADF;AAKD;;;;EAxCwB3B,S;;AA0C3B,eAAeM,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport API from './../api';\n\nexport const UserContext = React.createContext()\n\nexport const UserConsumer = UserContext.Consumer\n\nclass UserProvider extends Component {\n\n  state = {\n    user: {},\n    posts: [],\n    updateUser: this.updateUser\n  }\n\n  updateUser = user => {\n    this.setState({ user: user });\n  }\n\n  componentDidMount(){\n    const access_token = localStorage.getItem(\"token\");\n\n    const config = {\n      headers: {\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    API.get(\"me\", config)\n    .then(res => {\n      const user = res.data.user;\n      const posts = user.posts;\n      this.setState({ user, posts });\n    })\n    .catch(function (error) {\n      console.log(error);\n    })\n    \n  }\n\n  render () {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    )\n  }\n}\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}