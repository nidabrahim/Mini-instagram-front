{"ast":null,"code":"import _classCallCheck from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/postsProvider.jsx\";\nimport React, { Component } from 'react';\nimport API from './../api';\nvar PostsContext = React.createContext();\nexport var PostsConsumer = PostsContext.Consumer;\n\nvar PostsProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PostsProvider, _Component);\n\n  function PostsProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PostsProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PostsProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      posts: [],\n      updateItem: _this.updateItem\n    };\n\n    _this.updateItem = function (updatedItem) {\n      console.log(updatedItem); // this.setState(state => {\n      //     const posts = state.posts.map((item, j) => {\n      //       if (updatedItem._id === item._id) {\n      //         return updatedItem;\n      //       } else {\n      //         return item;\n      //       }\n      //     });\n      //     return {\n      //         posts,\n      //     };\n      //   });\n    };\n\n    return _this;\n  }\n\n  _createClass(PostsProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var access_token = localStorage.getItem(\"token\");\n      var config = {\n        headers: {\n          Authorization: access_token,\n          'Content-Type': 'application/json'\n        }\n      };\n      API.get(\"posts/public\", config).then(function (res) {\n        var posts = res.data.posts;\n\n        _this2.setState({\n          posts: posts\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(PostsContext.Provider, {\n        value: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return PostsProvider;\n}(Component);\n\nexport default PostsProvider;","map":{"version":3,"sources":["/home/youssef/ISIMA/projects/ReactJS/InstaFront/src/providers/postsProvider.jsx"],"names":["React","Component","API","PostsContext","createContext","PostsConsumer","Consumer","PostsProvider","state","posts","updateItem","updatedItem","console","log","access_token","localStorage","getItem","config","headers","Authorization","get","then","res","data","setState","catch","error","props","children"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,UAAhB;AAEA,IAAMC,YAAY,GAAGH,KAAK,CAACI,aAAN,EAArB;AAEA,OAAO,IAAMC,aAAa,GAAGF,YAAY,CAACG,QAAnC;;IAEDC,a;;;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,UAAU,EAAE,MAAKA;AAFX,K;;UAKRA,U,GAAa,UAACC,WAAD,EAAiB;AAC1BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAD0B,CAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACD,K;;;;;;;wCAEkB;AAAA;;AACjB,UAAMG,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAArB;AAEA,UAAMC,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEL,YADR;AAEP,0BAAgB;AAFT;AADI,OAAf;AAOAZ,MAAAA,GAAG,CAACkB,GAAJ,CAAQ,cAAR,EAAwBH,MAAxB,EACCI,IADD,CACM,UAAAC,GAAG,EAAI;AACT,YAAMb,KAAK,GAAGa,GAAG,CAACC,IAAJ,CAASd,KAAvB;;AACA,QAAA,MAAI,CAACe,QAAL,CAAc;AAAEf,UAAAA,KAAK,EAALA;AAAF,SAAd;AACH,OAJD,EAKCgB,KALD,CAKO,UAAUC,KAAV,EAAiB;AACpBd,QAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACH,OAPD;AAQH;;;6BAEW;AACR,aACE,oBAAC,YAAD,CAAc,QAAd;AAAuB,QAAA,KAAK,EAAE,KAAKlB,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKmB,KAAL,CAAWC,QADd,CADF;AAKD;;;;EAlDyB3B,S;;AAoD5B,eAAeM,aAAf","sourcesContent":["import React, { Component } from 'react';\nimport API from './../api';\n\nconst PostsContext = React.createContext()\n\nexport const PostsConsumer = PostsContext.Consumer\n\nclass PostsProvider extends Component {\n\n  state = {\n    posts: [],\n    updateItem: this.updateItem\n  }\n\n  updateItem = (updatedItem) => {\n      console.log(updatedItem);\n    // this.setState(state => {\n    //     const posts = state.posts.map((item, j) => {\n    //       if (updatedItem._id === item._id) {\n    //         return updatedItem;\n    //       } else {\n    //         return item;\n    //       }\n    //     });\n  \n    //     return {\n    //         posts,\n    //     };\n    //   });\n  };\n\n  componentDidMount(){\n    const access_token = localStorage.getItem(\"token\");\n\n    const config = {\n      headers: {\n        Authorization: access_token,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    API.get(\"posts/public\", config)\n    .then(res => {\n        const posts = res.data.posts;\n        this.setState({ posts });\n    })\n    .catch(function (error) {\n        console.log(error);\n    })\n}\n\n  render () {\n    return (\n      <PostsContext.Provider value={this.state}>\n        {this.props.children}\n      </PostsContext.Provider>\n    )\n  }\n}\nexport default PostsProvider"]},"metadata":{},"sourceType":"module"}